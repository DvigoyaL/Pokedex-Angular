<!-- Loading State for Initial Pokemon List -->
@if (isLoading && !isSearching) {
  <div class="text-center my-8">
    <p class="text-xl text-gray-600">Cargando Pok√©mon...</p>
  </div>
}

<!-- Error State -->
@if (error && !isSearching) {
  <div class="text-center my-8">
    <p class="text-red-500 text-xl">{{ error }}</p>
  </div>
}

<!-- Search Results Component -->
@if (isSearching) {
  <app-search-results
    [allPokemonList]="allPokemonList"
    [limit]="limit"
    (searchResultsChange)="onSearchResultsChange($event)"
    (pokemonSelected)="onSearchPokemonSelected($event)"
  ></app-search-results>
}

<!-- Regular Pokemon List (when not searching) -->
@if (!isLoading && !error && !isSearching) {
  <ul class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-7 gap-4 p-8">
    @for (pokemon of pokemonList; track pokemon.id) {
      <pokedex-pokemon-basic-card
        [pokemon]="pokemon"
        [backgroundColor]="getColorForType(pokemon.types[0].type.name)"
        [showFavoriteButton]="true"
        [isFavorite]="isFavorite(pokemon.id)"
        (cardClicked)="selectPokemon(pokemon)"
        (favoriteToggled)="onFavoriteToggled($event)"
      ></pokedex-pokemon-basic-card>
    }
  </ul>

  <!-- Navigation Buttons (only when not searching) -->
  <pokedex-pokemon-navigationButtons
    [offset]="offset"
    [isLoading]="isLoading"
    (previousClicked)="onPreviousPage()"
    (nextClicked)="onNextPage()"
  ></pokedex-pokemon-navigationButtons>
}

<!-- Pokemon Modal (shared between search and list) -->
<pokedex-pokemon-modal-card
  [pokemon]="selectedPokemon"
  [pokemonList]="isSearching ? [] : pokemonList"
  (modalClosed)="closeModal()"
  (pokemonSelected)="selectPokemon($event)"
></pokedex-pokemon-modal-card>
